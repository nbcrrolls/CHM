.TH CHM_TEST 1
.\"
.de M           \" man page reference
\\fI\\$1\\fR\\|(\\$2)\\$3
..
.SH NAME
.B CHM_test.sh \- Cascaded Hierarchical Model classifying/test program
.SH SYNOPSIS
.BR CHM_test.sh
<INPUT FILES> <OUTPUT FOLDER> [ options ]
.SH DESCRIPTION
.B Cascaded Hierarchical Model classifying/test program segments features
from an image using classifier generated by 
.M chm_train 1
program.
.PP
For more information see:
.M chm 1
or 
.M chm_train 1
.PP
or <https://www.sci.utah.edu/software/chm.html>
.SH <INPUT FILES> <OUTPUT FOLDER>
.TP
.BR <INPUT FILES>
The input files to use. See below for the specification.
.TP
.BR <OUTPUT FOLDER>
The folder to save the generated images to.
The images will have the same name and type as the input
files but be placed in this folder.
.PP
The input files can be specified in multiple ways. It needs to be one of the
these or a comma-separated list of these:
.TP 
* path to a folder 
all PNGs and TIFFs in that folder
.TP
* path to a file 
only that file 
.TP
* path with numerical pattern
get all files matching the pattern
pattern must have #s in it and end with a semicolon and number range
the #s are replaced by the values at the end with leading zeros
Example: in/####.png;5-15 would do in/0005.png through in/0015.png.
Note: the semicolon needs to be escaped or in double quotes in some shells
.TP
* path with wildcard pattern  - get all files matching the pattern
pattern has * in it which means any number of any characters
Example: in/lbl_*.tif does all TIFF images starting with lbl_ in in.
Note: the asterisk needs to be escaped or in double quotes in some shells
.SH OPTIONS
.TP
.BR \-m " " \fImodel_folder\fR
The folder that contains the model data. Default is ./temp/.
(contains param.mat and MODEL_level#_stage#.mat)
.TP
.BR \-b " " \fIblock_size\fR
Set the block size to use as WxH. By default the block size
is the the same as the size of the training images (which is
believed to be optimal). Old models did not include the size
of the training images so this argument must always be given
in that case.
.TP
.BR \-o " " \fIoverlap_size\fR
Specifies how much the blocks should overlap given as WxH.
Default is 50x50. The value used will depend on the size
of the structures being segmenting but at most 75 pixels
seems necessary.
.TP
.BR \-t " " \fItile_pos\fR
Specifies that only the given blocks/tiles be processed by
CHM while all others simply output black. Each tile is given
as C,R (e.g 2,1 would be the tile in the second column 2 and
first row). Can process multiple tiles by using multiple -t
arguments. The tiles are defined by multiples of
block_size-2*overlap_size. A tile position out of range will
be ignored. If not included then all tiles will be processed.
.TP
.BR \-h
Don't histogram-equalize the testing images to the training
image histogram (if provided in the model). This option
should only be used if the testing data has already been
equalized.
.TP
.BR \-s
Single-thread / non-parallel. Normally one small step of this
is done in parallel using all available physical cores.
.SH COPYRIGHT
Copyright: 2013, the University of Utah
